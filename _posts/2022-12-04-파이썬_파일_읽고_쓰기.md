---
layout: post
title: "파이썬 파일 읽고 쓰기"
categories: 공부
date: 2022-12-04 23:59:00+0900
tags: [파이썬, 파일 읽고 쓰기, 공부, 정리]
---

# 파일 읽고 쓰기
이번에 배워볼 입출력 방식은 새로 파일을 만들고 새파일에 프로그램이 만든 값을 적어보는   
방식과 또 만든 파일에 적은 내용을 읽고 새로운 내용을 추가해보는 방법을 배워볼 것이다.

## 파일 생성하기

```
f = open("새파일.txt", 'w')
f.close()
```

위에 프로그램을 실행해 본다면 디렉터리에 새로울 파일이 하나 생성된 것을 확인 할 수 있다.  
파일을 생성 하기 위해선 내장 함수인 open을 사용 한다.  
보면 open 함수는 '파일 객체 = open(파일 이름, 파일 열기 모드)' 로 파일 이름과 파일 열기 모드를 입력값으로 받고  
결괏값으로 파일 객체를 리턴한다.

> 파일 열기모드 종류  
> (r) 일기 모드: 파일을 읽기만 할 때 사용  
> (w) 쓰기 모드: 파일에 내용을 쓸 때 사용  
> (a) 추가 모드: 파일의 마지막에 새로운 내용을 추가할 때 사용

파일을 쓰기모드로 열면 해당 파일이 이미 존재 한다면 원래 있던 내용이 모두 사라지고,  
해당 파일이 존재 하지 않는다면 새로운 파일이 생성된다.

위에 생성 하는과정에선 현재 디렉터리에서 생성 되었다.  
하지만 다른 디럭터리에서 생성을 하고 싶다면 어떻게 해야 할까?

C:/doit 디렉터리에 만약 새파일을 생성 하고 싶다면? 

```
f = open("C:/doit/새파일.txt", 'w')
f.close()
```

이렇게 새파일 앞에 파일 경로를 설정 해주면 그 디렉터리에 생성이 가능하다.  

f.close() 열려있는 파일 객체를 닫아주는 역활을 한다.  
물론 생략 해도 프로그램이 종료할 때 열려있는 파일의 객체를 자동으로 닫아주기는 하지만 직접 닫아 주는 것이 좋다.  
만약 쓰기모드로 열었던 파일을 닫지않고 다시 사용하려고 하면 오류가 발생 되기 때문이다.

## 파일을 쓰기 모드로 열어 내용 쓰기

이번엔 파일을 만들고 안에 문자열을 넣어 보도록 하자.

```
f = open("C:/doit/새파일.txt", 'w')
for i in range(1,11):
    data = "%d번째 줄입니다.\n" % i
    f.write(data)
f.close()
```

파일을 생성하고 1부터 10번째 줄입니다를 적는 프로그램을 만들었다.   
중간의 for문을 보면 대충 감이 올꺼라고 생각한다.  
print문 대신 write 함수를 사용해 데이터를 파일에 적어주었다.  

새파일.txt 파일을 열어보면   

1 번째 줄입니다.  
...  
10 번째 줄입니다.  

라고 적힌 파일을 볼 수 있다.

## 파일을 읽는 여러가지 방법

### readline 함수 이용하기
파일을 읽는 방법중 첫번째는 readline 함수를 이용하는 것이다.

```
f = open("C:/doit/새파일.txt", 'r')
line = f.readline()
print(line)
f.close()
```

위 처럼 새파일을 (r)읽기 모드로 열어 readline함수를 사용해서 파일의 첫 번째 줄을 읽어 출력 한다. 
위에서 만든 파일이 열렸다면 첫번째 줄인 "1번째 줄입니다." 가 출력될 것 이다.

만약에 모든 줄이 출력되길 원한다면?

```
f = open("C:/doit/새파일.txt", 'r')
while True:
    line = f.readline()
    if not line: break
    print(line)
f.close()

```

이렇게 while문을 이용해서 True로 무한루프 안에 readline함수를 사용해 계속해서 출력 하고,  
더이상 출력 할 줄이 없다면 break을 수행하게 하여 모든 줄을 출력 한다.

### readlines 함수 사용하기

```
f = open("C:/doit/새파일.txt", 'r')
lines = f.readlines()
for line in lines:
    print(line)
f.close()
```

두번째 방법은 readlines 함수를 사용하는 방법이다.  
위에 예시를 보면 readlines 함수는 파일 모든줄을 읽고 각각의 줄을 요소로 갖는 리스트를 리턴한다.  
리스트를 대입하고 한개씩 출력 하기위해 for문을 사용해 출력 하면 모들 줄이 출력 된다.  

만약 출력 하게 되면 \n(줄바꿈) 문자 때문에 한줄 출력 하고 한줄의 띄게 되는데  
이것을 제거 하는것도 가능하다.

```
f = open("C:/doit/새파일.txt", 'r')
lines = f.readlines()
for line in lines:
    line = line.strip() # 줄끝에 바꿈 문자를 제거한다.
    print(line)
f.close()
```

이렇게 for문 밑에 strip 함수를 이용하면 줄 바꿈 문자를 제거할 수 있다.  

### read 함수 사용하기

```
f = open("C:/doit/새파일.txt", 'r')
data = f.read()
print(data)
f.close()
```

세 번째 방법은 read 함수를 사용하는 방법이다.

read 함수는 파일 냐용 전체를 문자열로 리턴한다.

출력 해보면 새파일 내용 전체가 출력 된다.

### 파일 객체를 for문과 함께 사용

```
f = open("C:/doit/새파일.txt", 'r')
for line in f:
    print(line)
f.close()
```

파일 객페는 기본적으로 for문과 함께 사용하여 파일을 줄단위로 읽는게 가능하다.

## 파일에 새로운 내용 추가

위에서 설명 했던 것처럼 쓰기모드로 파일을 열면 이미 존재 하는 파일은 내용이 사라지게 된다.  
그래서 추가로 내용을 적고 싶다면 파일 추가 모드를 사용하면 가능하다. 

```
f = open("C:/doit/새파일.txt", 'a')
for i in range(11, 20):
    data = "%d번째 줄입니다.\n" % i
    f.write(data)
f.close()
```

파일 추가 모드인 a를 적고 write를 사용해 내용을 추가해 주었다.  
이렇게 파일 추가 모드로 열면 이전 내용 뒤에 새로 추가하는 내용을 적어준다.  

## with문과 함게 사용

위에선 항상 파일을 열고 닫아 주어야 했다.  
만약 이게 자동으로 열고 닫아준다면 좋지 않을까?  

```
f = open("foo.txt", 'w')
f.write("I Love SCUBA")
f.close()

with open("foo.txt", 'w')as f:
    f.write("I Love SCUBA")
```

위에 예제를 with문으로 바꾼것이다.

이렇게 with문을 사용해서 열고 with문을 벗어나는 순간 자동으로 파일은 닫히게 된다.


이 포스팅은 점프투 파이썬을 보고 정리한 자료입니다.